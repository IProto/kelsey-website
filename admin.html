<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Site Admin ‚Äî Content Editor</title>
  <meta name="robots" content="noindex, nofollow" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  <style>
    :root {
      --admin-primary: #4F46E5;
      --admin-primary-hover: #4338CA;
      --admin-primary-light: #EEF2FF;
      --admin-success: #059669;
      --admin-success-light: #ECFDF5;
      --admin-danger: #DC2626;
      --admin-danger-light: #FEF2F2;
      --admin-warning: #D97706;
      --admin-warning-light: #FFFBEB;
      --admin-bg: #F8FAFC;
      --admin-surface: #FFFFFF;
      --admin-border: #E2E8F0;
      --admin-text: #1E293B;
      --admin-text-secondary: #64748B;
      --admin-text-muted: #94A3B8;
      --admin-radius: 10px;
      --admin-radius-sm: 6px;
      --admin-shadow: 0 1px 3px rgba(0, 0, 0, .06), 0 1px 2px rgba(0, 0, 0, .04);
      --admin-shadow-md: 0 4px 6px -1px rgba(0, 0, 0, .07), 0 2px 4px -2px rgba(0, 0, 0, .05);
      --admin-transition: 200ms cubic-bezier(.4, 0, .2, 1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--admin-bg);
      color: var(--admin-text);
      font-size: 14px;
      line-height: 1.6
    }

    /* Layout */
    .admin-layout {
      display: grid;
      grid-template-columns: 240px 1fr;
      min-height: 100vh
    }

    /* Sidebar */
    .sidebar {
      background: var(--admin-surface);
      border-right: 1px solid var(--admin-border);
      padding: 1.5rem 0;
      position: sticky;
      top: 0;
      height: 100vh;
      display: flex;
      flex-direction: column
    }

    .sidebar__brand {
      padding: 0 1.25rem 1.5rem;
      border-bottom: 1px solid var(--admin-border);
      margin-bottom: .75rem
    }

    .sidebar__title {
      font-size: .95rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: .5rem
    }

    .sidebar__title svg {
      color: var(--admin-primary)
    }

    .sidebar__subtitle {
      font-size: .75rem;
      color: var(--admin-text-muted);
      margin-top: .25rem
    }

    .sidebar__nav {
      flex: 1;
      padding: .5rem .75rem
    }

    .sidebar__link {
      display: flex;
      align-items: center;
      gap: .625rem;
      padding: .55rem .75rem;
      border-radius: var(--admin-radius-sm);
      color: var(--admin-text-secondary);
      text-decoration: none;
      font-size: .85rem;
      font-weight: 500;
      cursor: pointer;
      border: none;
      background: none;
      width: 100%;
      text-align: left;
      transition: all var(--admin-transition);
      font-family: inherit
    }

    .sidebar__link:hover {
      background: var(--admin-bg);
      color: var(--admin-text)
    }

    .sidebar__link.active {
      background: var(--admin-primary-light);
      color: var(--admin-primary)
    }

    .sidebar__link svg {
      width: 18px;
      height: 18px;
      flex-shrink: 0
    }

    .sidebar__actions {
      padding: .75rem;
      border-top: 1px solid var(--admin-border);
      display: flex;
      flex-direction: column;
      gap: .5rem
    }

    /* Main */
    .main {
      padding: 2rem 2.5rem;
      max-width: 900px
    }

    .main__header {
      margin-bottom: 2rem;
      display: flex;
      align-items: center;
      justify-content: space-between
    }

    .main__title {
      font-size: 1.5rem;
      font-weight: 700
    }

    .main__description {
      color: var(--admin-text-secondary);
      font-size: .9rem;
      margin-top: .25rem
    }

    /* Tabs */
    .tab-panel {
      display: none
    }

    .tab-panel.active {
      display: block
    }

    /* Cards */
    .card {
      background: var(--admin-surface);
      border: 1px solid var(--admin-border);
      border-radius: var(--admin-radius);
      padding: 1.5rem;
      margin-bottom: 1.25rem;
      box-shadow: var(--admin-shadow)
    }

    .card__title {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: .5rem
    }

    .card__title svg {
      width: 18px;
      height: 18px;
      color: var(--admin-primary)
    }

    /* Forms */
    .form-group {
      margin-bottom: 1.25rem
    }

    .form-group:last-child {
      margin-bottom: 0
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem
    }

    .form-label {
      display: block;
      font-size: .82rem;
      font-weight: 600;
      color: var(--admin-text);
      margin-bottom: .35rem
    }

    .form-hint {
      font-size: .75rem;
      color: var(--admin-text-muted);
      margin-top: .25rem
    }

    .form-hint a {
      color: var(--admin-primary)
    }

    .form-input,
    .form-textarea,
    .form-select {
      width: 100%;
      padding: .6rem .8rem;
      border: 1.5px solid var(--admin-border);
      border-radius: var(--admin-radius-sm);
      font-family: inherit;
      font-size: .875rem;
      color: var(--admin-text);
      background: var(--admin-surface);
      transition: border-color var(--admin-transition), box-shadow var(--admin-transition);
      outline: none
    }

    .form-input:focus,
    .form-textarea:focus {
      border-color: var(--admin-primary);
      box-shadow: 0 0 0 3px rgba(79, 70, 229, .1)
    }

    .form-textarea {
      min-height: 100px;
      resize: vertical
    }

    /* Toggle */
    .toggle-wrap {
      display: flex;
      align-items: center;
      gap: .75rem
    }

    .toggle {
      position: relative;
      width: 44px;
      height: 24px;
      appearance: none;
      -webkit-appearance: none;
      background: var(--admin-border);
      border-radius: 12px;
      cursor: pointer;
      transition: background var(--admin-transition);
      border: none;
      flex-shrink: 0
    }

    .toggle::after {
      content: '';
      position: absolute;
      top: 2px;
      left: 2px;
      width: 20px;
      height: 20px;
      background: #fff;
      border-radius: 50%;
      box-shadow: 0 1px 3px rgba(0, 0, 0, .15);
      transition: transform var(--admin-transition)
    }

    .toggle:checked {
      background: var(--admin-primary)
    }

    .toggle:checked::after {
      transform: translateX(20px)
    }

    .toggle-label {
      font-size: .85rem;
      font-weight: 500
    }

    /* Buttons */
    .btn {
      display: inline-flex;
      align-items: center;
      gap: .5rem;
      padding: .55rem 1rem;
      border: 1.5px solid transparent;
      border-radius: var(--admin-radius-sm);
      font-family: inherit;
      font-size: .85rem;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--admin-transition);
      text-decoration: none
    }

    .btn svg {
      width: 16px;
      height: 16px
    }

    .btn--primary {
      background: var(--admin-primary);
      color: #fff
    }

    .btn--primary:hover {
      background: var(--admin-primary-hover)
    }

    .btn--primary:disabled {
      opacity: .5;
      cursor: not-allowed
    }

    .btn--success {
      background: var(--admin-success);
      color: #fff
    }

    .btn--success:hover {
      background: #047857
    }

    .btn--danger {
      background: transparent;
      color: var(--admin-danger);
      border-color: var(--admin-danger)
    }

    .btn--danger:hover {
      background: var(--admin-danger-light)
    }

    .btn--outline {
      background: transparent;
      color: var(--admin-text-secondary);
      border-color: var(--admin-border)
    }

    .btn--outline:hover {
      background: var(--admin-bg);
      color: var(--admin-text)
    }

    .btn--sm {
      padding: .35rem .65rem;
      font-size: .8rem
    }

    .btn--full {
      width: 100%;
      justify-content: center
    }

    /* List editors */
    .list-editor {
      display: flex;
      flex-direction: column;
      gap: .75rem
    }

    .list-item {
      background: var(--admin-bg);
      border: 1px solid var(--admin-border);
      border-radius: var(--admin-radius-sm);
      padding: 1rem;
      position: relative
    }

    .list-item__header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: .75rem
    }

    .list-item__title {
      font-weight: 600;
      font-size: .85rem;
      color: var(--admin-text-secondary)
    }

    .list-item__remove {
      background: none;
      border: none;
      color: var(--admin-text-muted);
      cursor: pointer;
      padding: .25rem;
      border-radius: 4px;
      display: flex;
      transition: all var(--admin-transition)
    }

    .list-item__remove:hover {
      color: var(--admin-danger);
      background: var(--admin-danger-light)
    }

    .list-item__remove svg {
      width: 16px;
      height: 16px
    }

    /* Image list */
    .image-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: .75rem
    }

    .image-card {
      position: relative;
      aspect-ratio: 4/3;
      border-radius: var(--admin-radius-sm);
      overflow: hidden;
      border: 1px solid var(--admin-border);
      background: var(--admin-bg)
    }

    .image-card img {
      width: 100%;
      height: 100%;
      object-fit: cover
    }

    .image-card__overlay {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, .5);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity var(--admin-transition)
    }

    .image-card:hover .image-card__overlay {
      opacity: 1
    }

    .image-card__remove {
      background: var(--admin-danger);
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer
    }

    .image-card__remove svg {
      width: 16px;
      height: 16px
    }

    .image-card--add {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: .5rem;
      cursor: pointer;
      border: 2px dashed var(--admin-border);
      color: var(--admin-text-muted);
      font-size: .8rem;
      font-weight: 500;
      transition: all var(--admin-transition)
    }

    .image-card--add:hover {
      border-color: var(--admin-primary);
      color: var(--admin-primary);
      background: var(--admin-primary-light)
    }

    .image-card--add svg {
      width: 24px;
      height: 24px
    }

    /* Star rating */
    .star-input {
      display: flex;
      gap: 2px
    }

    .star-input button {
      background: none;
      border: none;
      cursor: pointer;
      padding: 2px;
      color: #E2E8F0;
      transition: color var(--admin-transition)
    }

    .star-input button.filled {
      color: #F59E0B
    }

    .star-input button svg {
      width: 20px;
      height: 20px;
      fill: currentColor
    }

    /* Icon picker */
    .icon-picker {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
      gap: 6px;
      margin-top: .35rem
    }

    .icon-picker__btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 3px;
      padding: 8px 4px;
      border: 1.5px solid var(--admin-border);
      border-radius: var(--admin-radius-sm);
      background: var(--admin-surface);
      cursor: pointer;
      transition: all var(--admin-transition);
      font-family: inherit;
      font-size: .7rem;
      color: var(--admin-text-secondary)
    }

    .icon-picker__btn:hover {
      border-color: var(--admin-primary);
      background: var(--admin-primary-light);
      color: var(--admin-primary)
    }

    .icon-picker__btn.selected {
      border-color: var(--admin-primary);
      background: var(--admin-primary-light);
      color: var(--admin-primary);
      box-shadow: 0 0 0 2px rgba(79, 70, 229, .15);
      font-weight: 600
    }

    .icon-picker__btn svg {
      width: 20px;
      height: 20px
    }

    /* Toast */
    .toast {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background: var(--admin-text);
      color: #fff;
      padding: .75rem 1.25rem;
      border-radius: var(--admin-radius);
      font-size: .875rem;
      font-weight: 500;
      box-shadow: 0 8px 24px rgba(0, 0, 0, .2);
      transform: translateY(100px);
      opacity: 0;
      transition: all .3s cubic-bezier(.16, 1, .3, 1);
      z-index: 1000;
      display: flex;
      align-items: center;
      gap: .5rem
    }

    .toast.visible {
      transform: translateY(0);
      opacity: 1
    }

    .toast--success {
      background: var(--admin-success)
    }

    .toast--error {
      background: var(--admin-danger)
    }

    .toast--saving {
      background: var(--admin-primary)
    }

    /* Setup screen */
    .setup-screen {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 2rem;
      background: var(--admin-bg)
    }

    .setup-card {
      background: var(--admin-surface);
      border: 1px solid var(--admin-border);
      border-radius: 16px;
      padding: 2.5rem;
      max-width: 520px;
      width: 100%;
      box-shadow: var(--admin-shadow-md)
    }

    .setup-card h2 {
      font-size: 1.4rem;
      margin-bottom: .5rem
    }

    .setup-card .setup-desc {
      color: var(--admin-text-secondary);
      font-size: .9rem;
      margin-bottom: 1.5rem;
      line-height: 1.6
    }

    .setup-card .form-group {
      margin-bottom: 1rem
    }

    .setup-card .btn {
      width: 100%;
      justify-content: center;
      margin-top: .5rem
    }

    .setup-card .help-text {
      font-size: .78rem;
      color: var(--admin-text-muted);
      margin-top: 1rem;
      line-height: 1.6
    }

    .setup-card .help-text a {
      color: var(--admin-primary);
      text-decoration: underline
    }

    .setup-error {
      background: var(--admin-danger-light);
      border: 1px solid rgba(220, 38, 38, .2);
      border-radius: 8px;
      padding: .65rem .85rem;
      color: var(--admin-danger);
      font-size: .85rem;
      margin-bottom: 1rem;
      display: none
    }

    /* Preview bar */
    .preview-bar {
      background: var(--admin-primary-light);
      border: 1px solid rgba(79, 70, 229, .2);
      border-radius: var(--admin-radius-sm);
      padding: .6rem 1rem;
      font-size: .82rem;
      line-height: 1.5;
      color: var(--admin-primary);
      display: flex;
      align-items: flex-start;
      flex-wrap: wrap;
      gap: .4rem;
      margin-bottom: 1.5rem
    }

    .preview-bar svg {
      width: 16px;
      height: 16px;
      flex-shrink: 0
    }

    .preview-bar a {
      color: var(--admin-primary);
      font-weight: 600
    }

    /* Responsive */
    @media(max-width:768px) {
      .admin-layout {
        grid-template-columns: 1fr
      }

      .sidebar {
        position: fixed;
        left: -260px;
        width: 260px;
        z-index: 100;
        transition: left .3s ease
      }

      .sidebar.open {
        left: 0
      }

      .main {
        padding: 1.5rem
      }

      .form-row {
        grid-template-columns: 1fr
      }

      .preview-bar {
        font-size: .75rem;
        padding: .5rem .75rem;
        margin-top: 2.5rem
      }

      .mobile-toggle {
        display: flex;
        position: fixed;
        top: 1rem;
        left: 1rem;
        z-index: 50;
        background: var(--admin-surface);
        border: 1px solid var(--admin-border);
        border-radius: var(--admin-radius-sm);
        padding: .5rem;
        cursor: pointer;
        box-shadow: var(--admin-shadow)
      }
    }

    @media(min-width:769px) {
      .mobile-toggle {
        display: none
      }
    }

    .mobile-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, .3);
      z-index: 99
    }

    @media(max-width:768px) {
      .sidebar.open~.mobile-overlay {
        display: block
      }
    }
  </style>
</head>

<body>

  <button class="mobile-toggle" onclick="document.querySelector('.sidebar').classList.toggle('open')"><i
      data-lucide="menu"></i></button>

  <!-- Setup Screen -->
  <div id="setup-screen" class="setup-screen">
    <div class="setup-card">
      <h2>üîê Connect to GitHub</h2>
      <p class="setup-desc">This admin panel saves changes directly to your GitHub repository, which automatically
        publishes updates to your live site.</p>
      <div id="setup-error" class="setup-error"></div>
      <div class="form-group">
        <label class="form-label" for="setup-owner">Repository Owner</label>
        <input class="form-input" type="text" id="setup-owner" value="IProto" />
      </div>
      <div class="form-group">
        <label class="form-label" for="setup-repo">Repository Name</label>
        <input class="form-input" type="text" id="setup-repo" value="kelsey-website" />
      </div>
      <div class="form-group">
        <label class="form-label" for="setup-token">Personal Access Token</label>
        <input class="form-input" type="text" id="setup-token" placeholder="github_pat_xxxxxxxxxxxx" />
      </div>
      <button class="btn btn--primary" id="setup-connect"><i data-lucide="plug"></i> Connect</button>
      <p class="help-text">
        You need a GitHub Fine-grained Token with <strong>Contents: Read and write</strong> permission on this repo.
        <a href="https://github.com/settings/personal-access-tokens/new" target="_blank">Create one here ‚Üí</a><br />
        The token is stored only in your browser's localStorage.
      </p>
    </div>
  </div>

  <!-- Admin Panel -->
  <div id="admin-panel" style="display:none">
    <div class="admin-layout">
      <aside class="sidebar">
        <div class="sidebar__brand">
          <div class="sidebar__title"><i data-lucide="settings-2"></i> Site Admin</div>
          <div class="sidebar__subtitle">Content Editor</div>
        </div>
        <nav class="sidebar__nav" id="sidebar-nav">
          <button class="sidebar__link active" data-tab="general"><i data-lucide="home"></i> General</button>
          <button class="sidebar__link" data-tab="banner"><i data-lucide="megaphone"></i> Banner</button>
          <button class="sidebar__link" data-tab="hero"><i data-lucide="image"></i> Hero</button>
          <button class="sidebar__link" data-tab="about"><i data-lucide="info"></i> About</button>
          <button class="sidebar__link" data-tab="gallery"><i data-lucide="images"></i> Gallery</button>
          <button class="sidebar__link" data-tab="amenities"><i data-lucide="list-checks"></i> Amenities</button>
          <button class="sidebar__link" data-tab="location"><i data-lucide="map-pin"></i> Location</button>
          <button class="sidebar__link" data-tab="reviews"><i data-lucide="message-square"></i> Reviews</button>
          <button class="sidebar__link" data-tab="contact"><i data-lucide="mail"></i> Contact</button>
          <button class="sidebar__link" data-tab="footer"><i data-lucide="layout"></i> Footer</button>
        </nav>
        <div class="sidebar__actions">
          <button class="btn btn--success btn--full" id="save-btn"><i data-lucide="upload-cloud"></i> Save &amp;
            Deploy</button>
          <a class="btn btn--outline btn--full" id="view-site-link" href="#" target="_blank"><i
              data-lucide="external-link"></i> View Live Site</a>
          <button class="btn btn--outline btn--full" id="disconnect-btn"><i data-lucide="log-out"></i>
            Disconnect</button>
        </div>
      </aside>

      <main class="main">
        <div class="preview-bar"><i data-lucide="info"></i> Make your changes, then click <strong>Save &amp;
            Deploy</strong>. Changes go live in ~30 seconds.</div>

        <!-- General -->
        <div class="tab-panel active" id="tab-general">
          <div class="main__header">
            <div>
              <h1 class="main__title">General Settings</h1>
              <p class="main__description">Property name and branding</p>
            </div>
          </div>
          <div class="card">
            <div class="form-group"><label class="form-label" for="propertyName">Property Name</label><input
                class="form-input" type="text" id="propertyName" placeholder="e.g. Sunset Ridge Retreat" /></div>
            <div class="form-group"><label class="form-label" for="tagline">Tagline</label><input class="form-input"
                type="text" id="tagline" placeholder="e.g. Your private escape in the hills" />
              <p class="form-hint">A short phrase that appears below the property name</p>
            </div>
          </div>
        </div>

        <!-- Banner -->
        <div class="tab-panel" id="tab-banner">
          <div class="main__header">
            <div>
              <h1 class="main__title">Announcement Banner</h1>
              <p class="main__description">Optional banner at the top of the site</p>
            </div>
          </div>
          <div class="card">
            <div class="form-group">
              <div class="toggle-wrap"><input type="checkbox" class="toggle" id="bannerEnabled" /><label
                  class="toggle-label" for="bannerEnabled">Show banner on site</label></div>
            </div>
            <div class="form-group"><label class="form-label" for="bannerMessage">Banner Message</label><input
                class="form-input" type="text" id="bannerMessage" placeholder="e.g. üå∏ Spring Special ‚Äî 15% off!" />
            </div>
            <div class="form-row">
              <div class="form-group"><label class="form-label" for="bannerLinkText">Button Text</label><input
                  class="form-input" type="text" id="bannerLinkText" placeholder="e.g. Book Now" /></div>
              <div class="form-group"><label class="form-label" for="bannerLink">Button Link</label><input
                  class="form-input" type="url" id="bannerLink" placeholder="https://airbnb.com/..." /></div>
            </div>
          </div>
        </div>

        <!-- Hero -->
        <div class="tab-panel" id="tab-hero">
          <div class="main__header">
            <div>
              <h1 class="main__title">Hero Section</h1>
              <p class="main__description">The big splash area at the top</p>
            </div>
          </div>
          <div class="card">
            <div class="card__title"><i data-lucide="image"></i> Background Image</div>
            <div class="form-group"><label class="form-label" for="heroBackgroundImage">Image URL</label><input
                class="form-input" type="url" id="heroBackgroundImage" />
              <p class="form-hint">Use a high-resolution landscape photo.</p>
            </div>
          </div>
          <div class="card">
            <div class="form-group"><label class="form-label" for="heroHeadline">Headline</label><input
                class="form-input" type="text" id="heroHeadline" /></div>
            <div class="form-group"><label class="form-label" for="heroSubheadline">Subheadline</label><textarea
                class="form-textarea" id="heroSubheadline" rows="2"></textarea></div>
            <div class="form-row">
              <div class="form-group"><label class="form-label" for="heroCtaText">Button Text</label><input
                  class="form-input" type="text" id="heroCtaText" /></div>
              <div class="form-group"><label class="form-label" for="heroCtaLink">Button Link</label><input
                  class="form-input" type="url" id="heroCtaLink" /></div>
            </div>
          </div>
        </div>

        <!-- About -->
        <div class="tab-panel" id="tab-about">
          <div class="main__header">
            <div>
              <h1 class="main__title">About the Property</h1>
              <p class="main__description">Description and key highlights</p>
            </div>
          </div>
          <div class="card">
            <div class="form-group"><label class="form-label" for="aboutTitle">Section Title</label><input
                class="form-input" type="text" id="aboutTitle" /></div>
            <div class="form-group"><label class="form-label">Description Paragraphs</label>
              <div id="about-paragraphs" class="list-editor"></div><button class="btn btn--outline btn--sm"
                onclick="addAboutParagraph()" style="margin-top:.5rem"><i data-lucide="plus"></i> Add Paragraph</button>
            </div>
            <div class="form-group"><label class="form-label" for="aboutImage">About Image URL</label><input
                class="form-input" type="url" id="aboutImage" />
              <p class="form-hint">The image shown next to the description</p>
            </div>
          </div>
          <div class="card">
            <div class="card__title"><i data-lucide="badge-check"></i> Property Highlights</div>
            <div id="about-highlights" class="list-editor"></div><button class="btn btn--outline btn--sm"
              onclick="addHighlight()" style="margin-top:.5rem"><i data-lucide="plus"></i> Add Highlight</button>
          </div>
        </div>

        <!-- Gallery -->
        <div class="tab-panel" id="tab-gallery">
          <div class="main__header">
            <div>
              <h1 class="main__title">Photo Gallery</h1>
              <p class="main__description">Property photos with lightbox</p>
            </div>
          </div>
          <div class="card">
            <div class="form-group"><label class="form-label" for="galleryTitle">Section Title</label><input
                class="form-input" type="text" id="galleryTitle" /></div>
            <div class="image-list" id="gallery-images"></div>
          </div>
        </div>

        <!-- Amenities -->
        <div class="tab-panel" id="tab-amenities">
          <div class="main__header">
            <div>
              <h1 class="main__title">Amenities</h1>
              <p class="main__description">What's included, organized by category</p>
            </div>
          </div>
          <div class="card">
            <div class="form-group"><label class="form-label" for="amenitiesTitle">Section Title</label><input
                class="form-input" type="text" id="amenitiesTitle" /></div>
          </div>
          <div id="amenities-categories"></div>
          <button class="btn btn--outline" onclick="addAmenityCategory()" style="margin-top:.5rem"><i
              data-lucide="plus"></i> Add Category</button>
        </div>

        <!-- Location -->
        <div class="tab-panel" id="tab-location">
          <div class="main__header">
            <div>
              <h1 class="main__title">Location</h1>
              <p class="main__description">Map, description, and nearby attractions</p>
            </div>
          </div>
          <div class="card">
            <div class="form-group"><label class="form-label" for="locationTitle">Section Title</label><input
                class="form-input" type="text" id="locationTitle" /></div>
            <div class="form-group"><label class="form-label" for="locationDescription">Description</label><textarea
                class="form-textarea" id="locationDescription" rows="3"></textarea></div>
            <div class="form-group"><label class="form-label" for="locationMapUrl">Google Maps Embed URL</label><input
                class="form-input" type="url" id="locationMapUrl" />
              <p class="form-hint">Go to Google Maps ‚Üí Share ‚Üí Embed ‚Üí copy the src URL</p>
            </div>
          </div>
          <div class="card">
            <div class="card__title"><i data-lucide="map-pin"></i> Nearby Attractions</div>
            <div id="location-attractions" class="list-editor"></div><button class="btn btn--outline btn--sm"
              onclick="addAttraction()" style="margin-top:.5rem"><i data-lucide="plus"></i> Add Attraction</button>
          </div>
        </div>

        <!-- Reviews -->
        <div class="tab-panel" id="tab-reviews">
          <div class="main__header">
            <div>
              <h1 class="main__title">Guest Reviews</h1>
              <p class="main__description">Testimonials from past guests</p>
            </div>
          </div>
          <div class="card">
            <div class="form-group"><label class="form-label" for="reviewsTitle">Section Title</label><input
                class="form-input" type="text" id="reviewsTitle" /></div>
            <div class="form-group"><label class="form-label" for="reviewsAvgRating">Average Rating</label><input
                class="form-input" type="number" id="reviewsAvgRating" min="1" max="5" step="0.1" style="width:100px" />
            </div>
          </div>
          <div id="reviews-list" class="list-editor"></div>
          <button class="btn btn--outline" onclick="addReview()" style="margin-top:.5rem"><i data-lucide="plus"></i> Add
            Review</button>
        </div>

        <!-- Contact -->
        <div class="tab-panel" id="tab-contact">
          <div class="main__header">
            <div>
              <h1 class="main__title">Contact Information</h1>
              <p class="main__description">How guests can reach you</p>
            </div>
          </div>
          <div class="card">
            <div class="form-group"><label class="form-label" for="contactTitle">Section Title</label><input
                class="form-input" type="text" id="contactTitle" /></div>
            <div class="form-group"><label class="form-label" for="contactDescription">Description</label><input
                class="form-input" type="text" id="contactDescription" /></div>
            <div class="form-row">
              <div class="form-group"><label class="form-label" for="contactEmail">Email</label><input
                  class="form-input" type="email" id="contactEmail" /></div>
              <div class="form-group"><label class="form-label" for="contactPhone">Phone</label><input
                  class="form-input" type="tel" id="contactPhone" /></div>
            </div>
            <div class="form-group"><label class="form-label" for="contactAirbnb">Airbnb Listing URL</label><input
                class="form-input" type="url" id="contactAirbnb" /></div>
            <div class="form-group">
              <div class="toggle-wrap"><input type="checkbox" class="toggle" id="contactFormEnabled" /><label
                  class="toggle-label" for="contactFormEnabled">Show contact form</label></div>
            </div>
            <div class="form-group"><label class="form-label" for="contactFormAction">Form Action URL
                (Formspree)</label><input class="form-input" type="url" id="contactFormAction"
                placeholder="https://formspree.io/f/your-id" />
              <p class="form-hint">Free at <a href="https://formspree.io" target="_blank">formspree.io</a></p>
            </div>
          </div>
        </div>

        <!-- Footer -->
        <div class="tab-panel" id="tab-footer">
          <div class="main__header">
            <div>
              <h1 class="main__title">Footer</h1>
              <p class="main__description">Copyright and social media links</p>
            </div>
          </div>
          <div class="card">
            <div class="form-group"><label class="form-label" for="footerCopyright">Copyright Text</label><input
                class="form-input" type="text" id="footerCopyright" /></div>
          </div>
          <div class="card">
            <div class="card__title"><i data-lucide="share-2"></i> Social Links</div>
            <div id="footer-socials" class="list-editor"></div><button class="btn btn--outline btn--sm"
              onclick="addSocialLink()" style="margin-top:.5rem"><i data-lucide="plus"></i> Add Social Link</button>
          </div>
        </div>
      </main>
    </div>
  </div>

  <div id="toast" class="toast"></div>

  <script>
    // ============================================================
    // ADMIN PANEL ‚Äî GitHub API CMS with improved UI
    // ============================================================

    const STORAGE_KEY = 'kelsey-admin-auth';
    const CONFIG_PATH = 'site-config.js';
    let config = null;
    let fileSha = null;

    // ‚îÄ‚îÄ Auth ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function getAuth() { try { return JSON.parse(localStorage.getItem(STORAGE_KEY)); } catch { return null; } }
    function setAuth(o, r, t) { localStorage.setItem(STORAGE_KEY, JSON.stringify({ owner: o, repo: r, token: t })); }
    function clearAuth() { localStorage.removeItem(STORAGE_KEY); location.reload(); }

    // ‚îÄ‚îÄ GitHub API ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    async function githubFetch(path, options = {}) {
      const auth = getAuth();
      const res = await fetch(`https://api.github.com/repos/${auth.owner}/${auth.repo}/${path}`, {
        ...options,
        headers: { 'Authorization': `Bearer ${auth.token}`, 'Accept': 'application/vnd.github.v3+json', 'Content-Type': 'application/json', ...(options.headers || {}) },
      });
      if (!res.ok) { const b = await res.json().catch(() => ({})); throw new Error(b.message || `GitHub API error: ${res.status}`); }
      return res.json();
    }

    function b64DecodeUTF8(base64) {
      const binary = atob(base64.replace(/\n/g, ''));
      const bytes = new Uint8Array(binary.length);
      for (let i = 0; i < binary.length; i++) bytes[i] = binary.charCodeAt(i);
      return new TextDecoder('utf-8').decode(bytes);
    }
    function b64EncodeUTF8(str) {
      const bytes = new TextEncoder().encode(str);
      let binary = '';
      for (let i = 0; i < bytes.length; i++) binary += String.fromCharCode(bytes[i]);
      return btoa(binary);
    }

    async function loadConfigFromGitHub() {
      const data = await githubFetch(`contents/${CONFIG_PATH}?ref=main`);
      fileSha = data.sha;
      const content = b64DecodeUTF8(data.content);
      const match = content.match(/const\s+SITE_CONFIG\s*=\s*(\{[\s\S]*\});?\s*$/);
      if (!match) throw new Error('Could not parse SITE_CONFIG from file');
      config = (new Function(`return (${match[1]})`))();
      return config;
    }

    async function saveConfigToGitHub() {
      const jsContent = `const SITE_CONFIG = ${JSON.stringify(config, null, 2)};\n`;
      const encoded = b64EncodeUTF8(jsContent);
      const data = await githubFetch(`contents/${CONFIG_PATH}`, {
        method: 'PUT',
        body: JSON.stringify({ message: 'Update site content via admin panel', content: encoded, sha: fileSha, branch: 'main' }),
      });
      fileSha = data.content.sha;
    }

    // ‚îÄ‚îÄ Toast ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function showToast(msg, type = '') {
      const t = document.getElementById('toast');
      t.textContent = msg;
      t.className = 'toast' + (type ? ' toast--' + type : '');
      t.classList.add('visible');
      clearTimeout(t._timeout);
      t._timeout = setTimeout(() => t.classList.remove('visible'), 4000);
    }

    // ‚îÄ‚îÄ Tab Navigation ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    document.querySelectorAll('[data-tab]').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.sidebar__link').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById('tab-' + btn.dataset.tab).classList.add('active');
        document.querySelector('.sidebar').classList.remove('open');
      });
    });

    // ‚îÄ‚îÄ Populate fields from config ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function populateFields() {
      if (!config) return;
      const C = config;
      document.getElementById('propertyName').value = C.propertyName || '';
      document.getElementById('tagline').value = C.tagline || '';
      document.getElementById('bannerEnabled').checked = C.banner?.enabled ?? false;
      document.getElementById('bannerMessage').value = C.banner?.message || '';
      document.getElementById('bannerLinkText').value = C.banner?.linkText || '';
      document.getElementById('bannerLink').value = C.banner?.link || '';
      document.getElementById('heroBackgroundImage').value = C.hero?.backgroundImage || '';
      document.getElementById('heroHeadline').value = C.hero?.headline || '';
      document.getElementById('heroSubheadline').value = C.hero?.subheadline || '';
      document.getElementById('heroCtaText').value = C.hero?.ctaText || '';
      document.getElementById('heroCtaLink').value = C.hero?.ctaLink || '';
      document.getElementById('aboutTitle').value = C.about?.title || '';
      document.getElementById('aboutImage').value = C.about?.image || '';
      renderAboutParagraphs(C.about?.paragraphs || []);
      renderHighlights(C.about?.highlights || []);
      document.getElementById('galleryTitle').value = C.gallery?.title || '';
      renderGalleryImages(C.gallery?.images || []);
      document.getElementById('amenitiesTitle').value = C.amenities?.title || '';
      renderAmenityCategories(C.amenities?.categories || []);
      document.getElementById('locationTitle').value = C.location?.title || '';
      document.getElementById('locationDescription').value = C.location?.description || '';
      document.getElementById('locationMapUrl').value = C.location?.mapEmbedUrl || '';
      renderAttractions(C.location?.nearbyAttractions || []);
      document.getElementById('reviewsTitle').value = C.reviews?.title || '';
      document.getElementById('reviewsAvgRating').value = C.reviews?.averageRating ?? 5;
      renderReviews(C.reviews?.items || []);
      document.getElementById('contactTitle').value = C.contact?.title || '';
      document.getElementById('contactDescription').value = C.contact?.description || '';
      document.getElementById('contactEmail').value = C.contact?.email || '';
      document.getElementById('contactPhone').value = C.contact?.phone || '';
      document.getElementById('contactAirbnb').value = C.contact?.airbnbLink || '';
      document.getElementById('contactFormEnabled').checked = C.contact?.formEnabled ?? false;
      document.getElementById('contactFormAction').value = C.contact?.formAction || '';
      document.getElementById('footerCopyright').value = C.footer?.copyright || '';
      renderSocialLinks(C.footer?.socialLinks || []);
    }

    // ‚îÄ‚îÄ Gather config from form ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function val(id) { return document.getElementById(id)?.value?.trim() || ''; }

    function gatherConfig() {
      config = {
        propertyName: val('propertyName'), tagline: val('tagline'),
        banner: { enabled: document.getElementById('bannerEnabled').checked, message: val('bannerMessage'), linkText: val('bannerLinkText'), link: val('bannerLink') },
        hero: { backgroundImage: val('heroBackgroundImage'), headline: val('heroHeadline'), subheadline: val('heroSubheadline'), ctaText: val('heroCtaText'), ctaLink: val('heroCtaLink') },
        about: { title: val('aboutTitle'), paragraphs: gatherListTextareas('about-paragraphs'), highlights: gatherHighlights(), image: val('aboutImage') },
        gallery: { title: val('galleryTitle'), images: gatherGalleryImages() },
        amenities: { title: val('amenitiesTitle'), categories: gatherAmenityCategories() },
        location: { title: val('locationTitle'), description: val('locationDescription'), mapEmbedUrl: val('locationMapUrl'), nearbyAttractions: gatherAttractions() },
        reviews: { title: val('reviewsTitle'), averageRating: parseFloat(val('reviewsAvgRating')) || 5, items: gatherReviews() },
        contact: { title: val('contactTitle'), description: val('contactDescription'), email: val('contactEmail'), phone: val('contactPhone'), airbnbLink: val('contactAirbnb'), formEnabled: document.getElementById('contactFormEnabled').checked, formAction: val('contactFormAction') },
        footer: { copyright: val('footerCopyright'), socialLinks: gatherSocialLinks() },
      };
      return config;
    }

    // ‚îÄ‚îÄ Save & Deploy ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    async function handleSave() {
      const btn = document.getElementById('save-btn');
      btn.disabled = true;
      showToast('Saving and deploying...', 'saving');
      try {
        gatherConfig();
        await saveConfigToGitHub();
        showToast('‚úì Saved! Site updates in ~30 seconds.', 'success');
      } catch (err) {
        showToast('Error: ' + err.message, 'error');
        console.error(err);
      } finally { btn.disabled = false; }
    }

    // ‚îÄ‚îÄ Gallery Images ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function renderGalleryImages(images) {
      const c = document.getElementById('gallery-images');
      c.innerHTML = '';
      images.forEach((img, i) => {
        c.innerHTML += `<div class="image-card" title="${img.alt || ''}"><img src="${img.src}" alt="${img.alt || ''}" /><div class="image-card__overlay"><button class="image-card__remove" onclick="removeGalleryImage(${i})"><i data-lucide="trash-2"></i></button></div></div>`;
      });
      c.innerHTML += `<div class="image-card image-card--add" onclick="addGalleryImage()"><i data-lucide="plus"></i> Add Photo</div>`;
      lucide.createIcons({ nameAttr: 'data-lucide' });
    }
    function addGalleryImage() { const src = prompt('Image URL:'); if (!src) return; const alt = prompt('Description:') || ''; const imgs = gatherGalleryImages(); imgs.push({ src, alt }); renderGalleryImages(imgs); }
    function removeGalleryImage(i) { const imgs = gatherGalleryImages(); imgs.splice(i, 1); renderGalleryImages(imgs); }
    function gatherGalleryImages() { return [...document.querySelectorAll('#gallery-images .image-card:not(.image-card--add)')].map(c => ({ src: c.querySelector('img').src, alt: c.querySelector('img').alt || '' })); }

    // ‚îÄ‚îÄ About Paragraphs ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function renderAboutParagraphs(paragraphs) {
      const c = document.getElementById('about-paragraphs'); c.innerHTML = '';
      paragraphs.forEach((text, i) => { c.innerHTML += `<div class="list-item"><div class="list-item__header"><span class="list-item__title">Paragraph ${i + 1}</span><button class="list-item__remove" onclick="removeAboutParagraph(${i})"><i data-lucide="x"></i></button></div><textarea class="form-textarea" data-para-index="${i}" rows="3">${text}</textarea></div>`; });
      lucide.createIcons({ nameAttr: 'data-lucide' });
    }
    function addAboutParagraph() { const c = gatherListTextareas('about-paragraphs'); c.push(''); renderAboutParagraphs(c); }
    function removeAboutParagraph(i) { const c = gatherListTextareas('about-paragraphs'); c.splice(i, 1); renderAboutParagraphs(c); }
    function gatherListTextareas(id) { return [...document.querySelectorAll(`#${id} textarea`)].map(t => t.value.trim()); }

    // ‚îÄ‚îÄ Available Icons ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const AVAILABLE_ICONS = [
      { key: 'bed', lucide: 'bed-double', label: 'Bed' }, { key: 'bath', lucide: 'bath', label: 'Bath' }, { key: 'users', lucide: 'users', label: 'Guests' },
      { key: 'wifi', lucide: 'wifi', label: 'Wi-Fi' }, { key: 'car', lucide: 'car', label: 'Parking' }, { key: 'paw', lucide: 'paw-print', label: 'Pets' },
      { key: 'home', lucide: 'home', label: 'Home' }, { key: 'utensils', lucide: 'utensils-crossed', label: 'Kitchen' }, { key: 'tree', lucide: 'trees', label: 'Outdoors' },
      { key: 'mountain', lucide: 'mountain', label: 'Mountain' }, { key: 'star', lucide: 'star', label: 'Star' },
    ];

    // ‚îÄ‚îÄ Highlights ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function renderHighlights(highlights) {
      const c = document.getElementById('about-highlights'); c.innerHTML = '';
      highlights.forEach((h, i) => {
        c.innerHTML += `<div class="list-item"><div class="list-item__header"><span class="list-item__title">Highlight ${i + 1}</span><button class="list-item__remove" onclick="removeHighlight(${i})"><i data-lucide="x"></i></button></div>
    <div class="form-group"><label class="form-label">Label</label><input class="form-input highlight-label" type="text" value="${h.label}" /></div>
    <div class="form-group"><label class="form-label">Icon</label><input type="hidden" class="highlight-icon" value="${h.icon}" /><div class="icon-picker">${AVAILABLE_ICONS.map(ic => `<button type="button" class="icon-picker__btn${ic.key === h.icon ? ' selected' : ''}" data-icon-key="${ic.key}" onclick="selectHighlightIcon(${i},'${ic.key}',this)"><i data-lucide="${ic.lucide}"></i><span>${ic.label}</span></button>`).join('')}</div></div></div>`;
      });
      lucide.createIcons({ nameAttr: 'data-lucide' });
    }
    function selectHighlightIcon(idx, key, btn) { const li = btn.closest('.list-item'); li.querySelector('.highlight-icon').value = key; li.querySelectorAll('.icon-picker__btn').forEach(b => b.classList.remove('selected')); btn.classList.add('selected'); }
    function addHighlight() { const c = gatherHighlights(); c.push({ icon: '', label: '' }); renderHighlights(c); }
    function removeHighlight(i) { const c = gatherHighlights(); c.splice(i, 1); renderHighlights(c); }
    function gatherHighlights() { return [...document.querySelectorAll('#about-highlights .list-item')].map(item => ({ icon: item.querySelector('.highlight-icon').value.trim(), label: item.querySelector('.highlight-label').value.trim() })); }

    // ‚îÄ‚îÄ Amenity Categories ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function renderAmenityCategories(categories) {
      const c = document.getElementById('amenities-categories'); c.innerHTML = '';
      categories.forEach((cat, i) => {
        c.innerHTML += `<div class="card" data-cat-index="${i}"><div class="list-item__header"><div class="card__title"><i data-lucide="list-checks"></i> Category ${i + 1}</div><button class="list-item__remove" onclick="removeAmenityCategory(${i})"><i data-lucide="x"></i></button></div>
    <div class="form-group"><label class="form-label">Category Name</label><input class="form-input cat-name" type="text" value="${cat.name}" /></div>
    <div class="form-group"><label class="form-label">Icon</label><input type="hidden" class="cat-icon" value="${cat.icon}" /><div class="icon-picker">${AVAILABLE_ICONS.map(ic => `<button type="button" class="icon-picker__btn${ic.key === cat.icon ? ' selected' : ''}" data-icon-key="${ic.key}" onclick="selectCatIcon(${i},'${ic.key}',this)"><i data-lucide="${ic.lucide}"></i><span>${ic.label}</span></button>`).join('')}</div></div>
    <div class="form-group"><label class="form-label">Items (one per line)</label><textarea class="form-textarea cat-items" rows="4">${(cat.items || []).join('\n')}</textarea></div></div>`;
      });
      lucide.createIcons({ nameAttr: 'data-lucide' });
    }
    function selectCatIcon(idx, key, btn) { const card = btn.closest('.card'); card.querySelector('.cat-icon').value = key; card.querySelectorAll('.icon-picker__btn').forEach(b => b.classList.remove('selected')); btn.classList.add('selected'); }
    function addAmenityCategory() { const c = gatherAmenityCategories(); c.push({ name: '', icon: '', items: [] }); renderAmenityCategories(c); }
    function removeAmenityCategory(i) { const c = gatherAmenityCategories(); c.splice(i, 1); renderAmenityCategories(c); }
    function gatherAmenityCategories() { return [...document.querySelectorAll('#amenities-categories .card')].map(card => ({ name: card.querySelector('.cat-name').value.trim(), icon: card.querySelector('.cat-icon').value.trim(), items: card.querySelector('.cat-items').value.split('\n').map(s => s.trim()).filter(Boolean) })); }

    // ‚îÄ‚îÄ Attractions ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function renderAttractions(attractions) {
      const c = document.getElementById('location-attractions'); c.innerHTML = '';
      attractions.forEach((a, i) => { c.innerHTML += `<div class="list-item"><div class="list-item__header"><span class="list-item__title">Attraction ${i + 1}</span><button class="list-item__remove" onclick="removeAttraction(${i})"><i data-lucide="x"></i></button></div><div class="form-row"><div class="form-group"><label class="form-label">Name</label><input class="form-input attr-name" type="text" value="${a.name}" /></div><div class="form-group"><label class="form-label">Distance</label><input class="form-input attr-distance" type="text" value="${a.distance}" /></div></div></div>`; });
      lucide.createIcons({ nameAttr: 'data-lucide' });
    }
    function addAttraction() { const c = gatherAttractions(); c.push({ name: '', distance: '' }); renderAttractions(c); }
    function removeAttraction(i) { const c = gatherAttractions(); c.splice(i, 1); renderAttractions(c); }
    function gatherAttractions() { return [...document.querySelectorAll('#location-attractions .list-item')].map(item => ({ name: item.querySelector('.attr-name').value.trim(), distance: item.querySelector('.attr-distance').value.trim() })); }

    // ‚îÄ‚îÄ Reviews ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function renderReviews(reviews) {
      const c = document.getElementById('reviews-list'); c.innerHTML = '';
      reviews.forEach((r, i) => {
        const stars = [1, 2, 3, 4, 5].map(s => `<button class="${s <= r.rating ? 'filled' : ''}" onclick="setReviewRating(${i},${s})"><svg viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87L18.18 22 12 18.56 5.82 22 7 14.14l-5-4.87 6.91-1.01L12 2z"/></svg></button>`).join('');
        c.innerHTML += `<div class="card" data-review-index="${i}"><div class="list-item__header"><div class="card__title"><i data-lucide="message-square"></i> Review ${i + 1}</div><button class="list-item__remove" onclick="removeReview(${i})"><i data-lucide="x"></i></button></div>
    <div class="form-row"><div class="form-group"><label class="form-label">Guest Name</label><input class="form-input review-name" type="text" value="${r.name}" /></div><div class="form-group"><label class="form-label">Date</label><input class="form-input review-date" type="text" value="${r.date}" /></div></div>
    <div class="form-group"><label class="form-label">Rating</label><div class="star-input" data-review-stars="${i}">${stars}</div><input type="hidden" class="review-rating" value="${r.rating}" /></div>
    <div class="form-group"><label class="form-label">Review Text</label><textarea class="form-textarea review-text" rows="3">${r.text}</textarea></div></div>`;
      });
      lucide.createIcons({ nameAttr: 'data-lucide' });
    }
    function setReviewRating(idx, rating) { const c = document.querySelector(`[data-review-stars="${idx}"]`); c.querySelectorAll('button').forEach((b, i) => b.classList.toggle('filled', i < rating)); c.closest('.card').querySelector('.review-rating').value = rating; }
    function addReview() { const c = gatherReviews(); c.push({ name: '', rating: 5, text: '', date: '' }); renderReviews(c); }
    function removeReview(i) { const c = gatherReviews(); c.splice(i, 1); renderReviews(c); }
    function gatherReviews() { return [...document.querySelectorAll('#reviews-list .card')].map(card => ({ name: card.querySelector('.review-name').value.trim(), rating: parseInt(card.querySelector('.review-rating').value) || 5, text: card.querySelector('.review-text').value.trim(), date: card.querySelector('.review-date').value.trim() })); }

    // ‚îÄ‚îÄ Social Links ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const SOCIAL_ICONS = [{ key: 'instagram', lucide: 'instagram', label: 'Instagram' }, { key: 'facebook', lucide: 'facebook', label: 'Facebook' }, { key: 'twitter', lucide: 'twitter', label: 'Twitter / X' }];
    function renderSocialLinks(links) {
      const c = document.getElementById('footer-socials'); c.innerHTML = '';
      links.forEach((s, i) => {
        c.innerHTML += `<div class="list-item"><div class="list-item__header"><span class="list-item__title">Social Link ${i + 1}</span><button class="list-item__remove" onclick="removeSocialLink(${i})"><i data-lucide="x"></i></button></div>
  <div class="form-group"><label class="form-label">Platform</label><input type="hidden" class="social-platform" value="${s.platform}" /><div class="icon-picker">${SOCIAL_ICONS.map(ic => `<button type="button" class="icon-picker__btn${ic.key === s.platform ? ' selected' : ''}" data-icon-key="${ic.key}" onclick="selectSocialPlatform(${i},'${ic.key}',this)"><i data-lucide="${ic.lucide}"></i><span>${ic.label}</span></button>`).join('')}</div></div>
  <div class="form-group"><label class="form-label">URL</label><input class="form-input social-url" type="url" value="${s.url}" placeholder="https://..." /></div></div>`;
      });
      lucide.createIcons({ nameAttr: 'data-lucide' });
    }
    function selectSocialPlatform(idx, key, btn) { const li = btn.closest('.list-item'); li.querySelector('.social-platform').value = key; li.querySelectorAll('.icon-picker__btn').forEach(b => b.classList.remove('selected')); btn.classList.add('selected'); }
    function addSocialLink() { const c = gatherSocialLinks(); c.push({ platform: '', url: '' }); renderSocialLinks(c); }
    function removeSocialLink(i) { const c = gatherSocialLinks(); c.splice(i, 1); renderSocialLinks(c); }
    function gatherSocialLinks() { return [...document.querySelectorAll('#footer-socials .list-item')].map(item => ({ platform: item.querySelector('.social-platform').value.trim(), url: item.querySelector('.social-url').value.trim() })); }

    // ‚îÄ‚îÄ Initialization ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    async function init() {
      lucide.createIcons();
      const auth = getAuth();
      if (auth) {
        try {
          await loadConfigFromGitHub();
          document.getElementById('setup-screen').style.display = 'none';
          document.getElementById('admin-panel').style.display = '';
          document.getElementById('view-site-link').href = `https://${auth.owner}.github.io/${auth.repo}/`;
          populateFields();
          document.getElementById('save-btn').addEventListener('click', handleSave);
          document.getElementById('disconnect-btn').addEventListener('click', clearAuth);
          lucide.createIcons();
        } catch (err) { console.error(err); clearAuth(); }
      } else {
        document.getElementById('setup-connect').addEventListener('click', async () => {
          const owner = document.getElementById('setup-owner').value.trim();
          const repo = document.getElementById('setup-repo').value.trim();
          const token = document.getElementById('setup-token').value.trim();
          const errEl = document.getElementById('setup-error');
          if (!owner || !repo || !token) { errEl.textContent = 'All fields are required.'; errEl.style.display = 'block'; return; }
          setAuth(owner, repo, token);
          try { await loadConfigFromGitHub(); location.reload(); } catch (err) { errEl.textContent = 'Connection failed: ' + err.message; errEl.style.display = 'block'; clearAuth(); }
        });
      }
    }
    init();
  </script>
</body>

</html>